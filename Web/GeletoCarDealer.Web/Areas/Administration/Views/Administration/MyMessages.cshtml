@model GeletoCarDealer.Web.ViewModels.Administration.Messages.AllMessagesViewModel

@{
    ViewData["Title"] = "Моите съобщения";
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js">
</script>
<!-- /.preloader -->
<div id="preloader"></div>
<div class="theme-layout"></div>
<div class="container">
    <div class="heading4">
        <h2>Получени съобщения</h2>
    </div>
</div>
<div class="container">
    @foreach (var message in Model.Messages)
    {
        <div class="row car-listing">
            <hr />
            <div class="media">
                <div style="width: 200px; height: 250px; float: left; margin-right: 5rem;">
                    <img class="align-self-start mr-3" src="@message.Vehicle.ImageUrl" alt="@message.Vehicle.Make">
                </div>
                <a class="btn btn-success" onclick="showSendMessageForm(@message.Id)">Отговори</a>
                <script>
                    function showSendMessageForm(id) {
                        $(".comment-form").toggle();
                    }

                </script>
                <div class="media-body">
                    <h5 class="mt-0">@message.Vehicle.Make @message.Vehicle.Model  @message.Vehicle.Year</h5>
                    <br />
                    <p>@message.MessageContent</p>
                    <br />
                    <ul class="list-inline list-unstyled text-left">
                        <li class="list-inline-item">
                            <i class="fas fa-user-edit"></i>@message.SendBy
                        </li>
                        <li class="list-inline-item">
                            <i class="fas fa-calendar-alt"></i> @message.Email
                        </li>
                        <li class="list-inline-item">
                            <i class="fas fa-calendar-alt"></i> @message.CreatedOn
                        </li>
                        <li class="list-inline-item">
                            <i class="fas fa-comment-dots"></i> @message.PhoneNumber
                        </li>
                    </ul>
                </div>
                    <a asp-controller="Administration" asp-action="RemoveMessage" asp-route-id="@message.Id" class="btn btn-danger" >Премахни съобщението</a>
                <div class="send-email-to-agent">
                    <div class="comment-form" style="display: none;">
                        <form method="post" asp-controller="Administration" asp-action="SendMessage">
                            <div class="row">
                                <div class="col-md-12">
                                    <label>
                                        <i class="fa fa-user"></i>
                                        <input asp-for="@Model.CreateMessage.SendToEmail" name="SendToEmail" type="text" id="Email" placeholder="Емайл*">
                                        <span asp-validation-for="@Model.CreateMessage.SendToEmail" class="text-danger"></span>
                                    </label>
                                </div>
                                <div class="col-md-12">
                                    <label>
                                        <i class="fa fa-user"></i>
                                        <input asp-for="@Model.CreateMessage.Subject" name="Subject" type="text" id="Subject" placeholder="Тема*">
                                        <span asp-validation-for="@Model.CreateMessage.Subject" class="text-danger"></span>
                                    </label>
                                </div>
                                <div class="col-md-12">
                                    <label>
                                        <i class="fa fa-user"></i>
                                        <textarea asp-for="@Model.CreateMessage.Content" name="Content" type="text" id="Content" placeholder="Съдържание*"></textarea>
                                        <span asp-validation-for="@Model.CreateMessage.Content" class="text-danger"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <button type="submit" class="flat-btn">ИЗПРАТИ</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    }
</div>




